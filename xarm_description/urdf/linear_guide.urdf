<?xml version="1.0"?>
<robot name="linear_guide">

  <!-- Fixed vertical column -->
  <link name="fixed_column">
    <visual>
      <geometry><box size="0.1 0.1 1.5"/></geometry>
      <origin xyz="0.15 0 0.75" rpy="0 0 0"/>
      <material name="Gray"><color rgba="0.6 0.6 0.6 1.0"/></material>
    </visual>
    <collision>
      <geometry><box size="0.1 0.1 1.5"/></geometry>
      <origin xyz="0.15 0 0.75" rpy="0 0 0"/>
    </collision>
    <inertial>
      <mass value="10"/>
      <origin xyz="0.15 0 0.75"/>
      <inertia ixx="0.1" iyy="0.1" izz="0.1" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <!-- Moving base -->
  <link name="moving_base">
    <visual>
      <geometry><box size="0.4 0.4 0.1"/></geometry>
      <origin xyz="0 0 0.05" rpy="0 0 0"/>
      <material name="Green"><color rgba="0.1 0.8 0.1 1.0"/></material>
    </visual>
    <collision>
      <geometry><box size="0.4 0.4 0.1"/></geometry>
      <origin xyz="0 0 0.05" rpy="0 0 0"/>
    </collision>
    <inertial>
      <mass value="5"/>
      <origin xyz="0 0 0.05"/>
      <inertia ixx="0.05" iyy="0.05" izz="0.05" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <!-- Prismatic joint -->
  <joint name="lift_joint" type="prismatic">
    <parent link="fixed_column"/>
    <child link="moving_base"/>
    <origin xyz="-0.05 0 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="0.0" upper="1.0" effort="100.0" velocity="1.0"/>
  </joint>

  <gazebo reference="fixed_column">
    <material>Gazebo/Blue</material>
  </gazebo>
  <gazebo reference="moving_base">
    <material>Gazebo/Red</material>
  </gazebo>

  <!-- ROS 2 Control -->
  <ros2_control name="gazebo_ros2_control_linear_guide" type="system">
    <hardware>
      <plugin>gazebo_ros2_control/GazeboSystem</plugin>
    </hardware>
    <joint name="lift_joint">
      <command_interface name="position"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>

  <transmission name="lift_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lift_joint">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="lift_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
</robot>
